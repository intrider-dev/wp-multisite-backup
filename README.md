# WordPress Multisite Backup & Restore Plugin

## Описание

Этот плагин для WordPress Multisite позволяет создавать и восстанавливать резервные копии базы данных и файлов сети сайтов. Плагин обеспечивает асинхронное выполнение операций для работы с большими данными, что предотвращает зависание и тайм-ауты во время резервного копирования и восстановления. Дополнительно поддерживается обновление доменных имен при миграции.

## Возможности

- Создание резервных копий базы данных и файлов сети WordPress Multisite.
- Восстановление из резервных копий базы данных и файлов.
- Асинхронная обработка для предотвращения тайм-аутов.
- Поддержка обновления доменных имен при переносе сайтов на другой домен.
- Легкий интерфейс для администраторов сети WordPress Multisite.

## Структура файлов

<div>
  <pre>
    /wp-content/plugins/wp-multisite-backup/
    ├── include/                  # Старые файлы
    │   ├── backup_admin.php      # Файл использовался в прошлых версиях
    │   ├── backup_settings.php   # Файл использовался в прошлых версиях)
    ├── restore.php               # Файл для востановления бекапов
    ├── wp-multisite-backup.php   # Основной рабочий файл планига
  </pre>
</div>

## Установка

### 1. Скачивание плагина

Скачайте файлы плагина из репозитория GitHub или из другого источника.

### 2. Установка через панель управления WordPress

1. Перейдите в панель управления WordPress.
2. Зайдите в раздел "Плагины" и выберите "Добавить новый".
3. Нажмите кнопку "Загрузить плагин" и выберите ZIP-архив с плагином.
4. Нажмите "Установить сейчас".
5. Активируйте плагин после установки.

### 3. Ручная установка

1. Распакуйте архив плагина.
2. Загрузите папку плагина в директорию `/wp-content/plugins/` на вашем сервере.
3. Перейдите в раздел "Плагины" в панели управления WordPress.
4. Найдите плагин в списке и нажмите "Активировать".

## Использование

### Создание резервных копий

1. Перейдите в панель управления WordPress, затем в раздел **Инструменты** > **Резервное копирование**.
2. Укажите параметры:
   - Количество строк базы данных на один запрос (для уменьшения нагрузки на сервер).
   - Количество файлов на один запрос (для ускорения создания бэкапа).
   - Возможность пропустить резервное копирование базы данных или файлов (если требуется).
3. Нажмите **Создать резервную копию**. Процесс будет выполнен асинхронно, а прогресс можно отслеживать на экране.

### Восстановление из резервных копий

1. Перейдите в панель управления WordPress, затем в раздел **Инструменты** > **Восстановление**.
2. Выберите необходимую резервную копию для восстановления.
3. Нажмите **Восстановить** для начала процесса восстановления:
   - База данных будет восстановлена из последнего SQL дампа.
   - Файлы будут извлечены из ZIP-архива и восстановлены на сервере.
   - Если требуется, можно обновить домен сайта при переносе.

### Обновление доменного имени

Если вы переносите сайт на новый домен:
1. Укажите новый домен при восстановлении данных.
2. Плагин автоматически обновит все URL-адреса и доменные имена в базе данных.

## Настройки

Плагин предоставляет следующие настройки:

- **Количество строк на запрос**: Устанавливает, сколько строк базы данных будет обрабатываться за один запрос при создании резервной копии.
- **Количество файлов на запрос**: Определяет количество файлов, обрабатываемых за один запрос при создании резервной копии.
- **Пропустить резервное копирование базы данных**: Этот параметр позволяет пропустить процесс создания резервной копии базы данных.
- **Пропустить резервное копирование файлов**: Этот параметр позволяет пропустить процесс создания резервной копии файлов.

## Требования

- WordPress 5.0 или выше.
- Поддержка сети (Multisite).
- PHP 7.0 или выше.
- Расширения PHP:
  - `mysqli`
  - `zip`
  - `mbstring`

## Лицензия

Этот плагин распространяется по лицензии GPLv2 или более поздней версии. Подробности смотрите в файле LICENSE.

## Вклад

Принимаются запросы на добавление новых функций и исправление багов через систему [Issues](https://github.com/username/repository/issues) и Pull Requests.

## Контакты

Если у вас возникли вопросы или предложения, вы можете связаться с разработчиком по электронной почте: **intrider@mail.ru**.
